<!DOCTYPE html>
<html lang=" en-US ">

<head>
  <meta charset="UTF-8"> <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>OpenGL BMP 텍스처 로딩 | Jungsoo Nam</title>
<meta property="og:title" content="OpenGL BMP 텍스처 로딩" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="OpenGL에서 bmp파일을 로딩하여 texture를 생성하는 코드이다. bmp는 24/32비트만을 지원한다. 15,16비트와 256칼라는 지원하지 않는다. glTexImage2D로 생성하기 때문에 다음과 같이 필터가 셋팅되어 있어야 한다." />
<meta property="og:description" content="OpenGL에서 bmp파일을 로딩하여 texture를 생성하는 코드이다. bmp는 24/32비트만을 지원한다. 15,16비트와 256칼라는 지원하지 않는다. glTexImage2D로 생성하기 때문에 다음과 같이 필터가 셋팅되어 있어야 한다." />
<link rel="canonical" href="http://localhost:4000/2018/01/10/first-post.html" />
<meta property="og:url" content="http://localhost:4000/2018/01/10/first-post.html" />
<meta property="og:site_name" content="Jungsoo Nam" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-01-10T00:00:00+09:00" />
<script type="application/ld+json">
{"publisher":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/01/10/first-post.html"},"author":null,"description":"OpenGL에서 bmp파일을 로딩하여 texture를 생성하는 코드이다. bmp는 24/32비트만을 지원한다. 15,16비트와 256칼라는 지원하지 않는다. glTexImage2D로 생성하기 때문에 다음과 같이 필터가 셋팅되어 있어야 한다.","name":null,"dateModified":"2018-01-10T00:00:00+09:00","datePublished":"2018-01-10T00:00:00+09:00","headline":"OpenGL BMP 텍스처 로딩","sameAs":null,"url":"http://localhost:4000/2018/01/10/first-post.html","image":null,"@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/style.css?v=">
</head>

<body>
  <section class="page-header">
    <h1 class="project-name">Jungsoo Nam</h1>
    <h2 class="project-tagline">소프트웨어 개발자 남정수입니다.</h2>
     
  </section>

  <section class="main-content">
    <p>OpenGL에서 bmp파일을 로딩하여 texture를 생성하는 코드이다. bmp는 24/32비트만을 지원한다. 15,16비트와 256칼라는 지원하지 않는다. glTexImage2D로 생성하기 때문에 다음과 같이 필터가 셋팅되어 있어야 한다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define GL_BGRA 0x80E1 // Use this for 32bit bmp
#define GL_BGR_EXT 0x80E0
</span>
<span class="kt">void</span> <span class="nf">LoadBmp</span><span class="p">()</span>
<span class="p">{</span>
 <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">tex</span><span class="p">);</span>
 <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">"c:</span><span class="se">\\</span><span class="s">cap2.bmp"</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">);</span>
 <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fp</span><span class="p">)</span>
  <span class="k">return</span><span class="p">;</span>
 <span class="n">BITMAPFILEHEADER</span> <span class="n">bfh</span><span class="p">;</span>
 <span class="n">BITMAPINFOHEADER</span> <span class="n">bih</span><span class="p">;</span>
 <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bfh</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">BITMAPFILEHEADER</span><span class="p">),</span> <span class="n">fp</span><span class="p">);</span>
 <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bih</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">BITMAPINFOHEADER</span><span class="p">),</span> <span class="n">fp</span><span class="p">);</span>
 <span class="n">fseek</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">bfh</span><span class="p">.</span><span class="n">bfOffBits</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">);</span><span class="c1">// 중간에 더미값이 있을수도 있으니 정확하게 이렇게해서 데이타 시작 바이트를 찾아가자</span>
 <span class="kt">int</span> <span class="n">internalFormat</span> <span class="o">=</span> <span class="n">GL_BGR_EXT</span><span class="p">;</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">bih</span><span class="p">.</span><span class="n">biBitCount</span> <span class="o">==</span> <span class="mi">32</span><span class="p">)</span>
 <span class="p">{</span>
  <span class="n">internalFormat</span> <span class="o">=</span> <span class="n">GL_BGRA</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">bih</span><span class="p">.</span><span class="n">biBitCount</span> <span class="o">==</span> <span class="mi">24</span><span class="p">)</span>
 <span class="p">{</span>
  <span class="n">internalFormat</span> <span class="o">=</span> <span class="n">GL_BGR_EXT</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="k">else</span>
 <span class="p">{</span>
  <span class="c1">// 지원안되는 포맷(24,32만 지원)</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
  <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="k">return</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">data2</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">[</span><span class="n">bih</span><span class="p">.</span><span class="n">biSizeImage</span><span class="p">];</span>
 <span class="n">fread</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">bih</span><span class="p">.</span><span class="n">biSizeImage</span><span class="p">,</span> <span class="n">fp</span><span class="p">);</span>
 <span class="n">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGBA</span><span class="p">,</span> <span class="n">bih</span><span class="p">.</span><span class="n">biWidth</span><span class="p">,</span> <span class="n">bih</span><span class="p">.</span><span class="n">biHeight</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_BGRA</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">data2</span><span class="p">);</span><span class="c1">// GL_BGRA</span>
 <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
 <span class="n">delete</span><span class="p">[]</span> <span class="n">data2</span><span class="p">;</span>
 <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>


    <footer class="site-footer">
      
      <span class="site-footer-credits">This page was generated by
        <a href="https://pages.github.com">GitHub Pages</a>.</span>
    </footer>
  </section>

  

</body>

</html>